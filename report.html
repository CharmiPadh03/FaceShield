<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        .show{
            background-color: #00000043;
        }
        /* Simple pagination style */
        .dataTables_paginate {
            margin-top: 15px;
            margin-bottom: 15px;
            text-align: center;
        }

        .dataTables_paginate .paginate_button {
            padding: 5px 12px;
            margin: 0 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f8f9fa;
            color: #333;
            font-weight: 500;
        }

        .dataTables_paginate .paginate_button:hover {
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }

        .dataTables_paginate .paginate_button.disabled {
            background-color: #e9ecef;
            color: #adb5bd;
            cursor: not-allowed;
        }

        .dataTables_paginate .previous, .dataTables_paginate .next {
            font-weight: bold;
        }
    </style>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class=" d-flex flex-column min-vh-100">
        <div class="d-flex flex-row">
            <aside id="sidebar" class="text-light py-4 px-3 sidebar">
                <div class="d-flex align-items-center gap-2">
                    <!-- <svg class="icon" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
                        <path d="M7 21L2.7 16.7c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21" />
                        <path d="M22 21H7" />
                        <path d="M5 11l9 9" />
                    </svg> -->
                    <!-- <h1 class="h4 font-weight-bold heading">Edith</h1> -->
                    <img id="icon-img" class="icon-img" src="logo (2).PNG" alt="" srcset="">
                    <button class="menu-toggle active" id="toggleButton" type="button">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                </div>
                <nav class="mt-4">
                    <a href="home.html" id="nav-a-1" class="d-flex align-items-center gap-2 text-light py-2 px-3 rounded nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                            <polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span class="nav-text">Home</span>
                    </a>
                    <div id="nav-menus">
                        <a href="report.html" id="nav-a-3" class="d-flex align-items-center gap-2 text-light py-2 px-3 rounded nav-link active">
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 7h-3a2 2 0 0 1-2-2V2"></path><path d="M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"></path><path d="M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"></path></svg>
                            <span class="nav-text">Reports</span>
                        </a>
                        <a href="profile.html" id="nav-a-4" class="d-flex align-items-center gap-2 text-light py-2 px-3 rounded nav-link">
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="8" r="4"></circle>
                                <path d="M12 14c-4 0-6 2-6 4v2h12v-2c0-2-2-4-6-4z"></path>
                              </svg>
                              
                            <!-- <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path><circle cx="12" cy="12" r="3"></circle></svg> -->
                            <span class="nav-text">Profile</span>
                        </a>
                        <a href="home.html" id="nav-a-2" class="nav-a-2 d-flex align-items-center gap-2 text-light py-2 px-3 rounded nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-out">
                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                <polyline points="16 17 21 12 16 7"></polyline>
                                <line x1="21" y1="12" x2="9" y2="12"></line>
                            </svg>                            
                            <span class="nav-text">Logout</span>
                        </a>
                    </div>
                    <div id="nav-menus-login" style="display: none;">
                        <a href="#" id="login-btn" class="d-flex align-items-center gap-2 text-light py-2 px-3 rounded nav-link" data-bs-toggle="modal" data-bs-target="#formModal">
                            <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                <polyline points="10 17 15 12 10 7"></polyline>
                                <line x1="15" y1="12" x2="3" y2="12"></line>
                            </svg>
                            <span class="nav-text">Login/Signup</span>
                        </a>
                    </div>
                </nav>
            </aside>


            <main class="flex-grow container py-4 px-3">
                <section class="row g-3">
                    <div class="col-lg-12 col-md-12">
                        <div class="card shadow card-custom">
                            <div class="card-body">
                                <header class="mb-8">
                                    <h1 class="text-4xl font-bold mb-2 text-text-color">FACE SHIELD Reports Dashboard</h1>
                                    <p class="text-xl text-gray-400">Comprehensive analysis of deepfake detection results</p>
                                </header>
                                <section class="row g-3">
                                    <div class="col-lg-3 col-md-12">
                                        <div class="card shadow card-custom">
                                            <div class="card-body">
                                                <div class="flex justify-between items-center mb-4">
                                                    <h5 class="text-sm font-medium" style="color: #151533; display: flex; justify-content: space-between; align-items: center;">
                                                        Total Reports 
                                                        <i class="fa fa-bar-chart text-xl leading-none" style="color: black;" aria-hidden="true"></i>
                                                    </h5>                                                    
                                                    <hr class="hr" />
                                                </div>                                            
                                                <div class="text-3xl font-bold" id="totalReports">2</div>
                                                <p class="text-xs text-gray-300">+2.6% from last month</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-12">
                                        <div class="card shadow card-custom">
                                            <div class="card-body">
                                                <div class="flex justify-between items-center mb-4">
                                                    <h5 class="text-sm font-medium" style="color: #151533; display: flex; justify-content: space-between; align-items: center;">
                                                        Deepfakes Detected  
                                                        <i class="fa fa-exclamation-triangle text-xl leading-none" style="color: black;" aria-hidden="true"></i>
                                                    </h5>                                                    
                                                    <hr class="hr" />
                                                </div>                                            
                                                <div class="text-3xl font-bold" id="deepfakesDetected">2</div>
                                                <p class="text-xs text-gray-300">+0.8% from last month</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-12">
                                        <div class="card shadow card-custom">
                                            <div class="card-body">
                                                <div class="flex justify-between items-center mb-4">
                                                    <h5 class="text-sm font-medium" style="color: #151533; display: flex; justify-content: space-between; align-items: center;">
                                                        Average Confidence  
                                                        <i class="fa fa-line-chart text-xl leading-none" style="color: black;" aria-hidden="true"></i>
                                                    </h5>                                                    
                                                    <hr class="hr" />
                                                </div>                                            
                                                <div class="text-3xl font-bold" id="averageConfidence">98%</div>
                                                <p class="text-xs text-gray-300">+1.2% from last month</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-12">
                                        <div class="card shadow card-custom">
                                            <div class="card-body">
                                                <div class="flex justify-between items-center mb-4">
                                                    <h5 class="text-sm font-medium" style="color: #151533; display: flex; justify-content: space-between; align-items: center;">
                                                        Detection Rate 
                                                        <i class="fa fa-pie-chart text-xl leading-none" style="color: black;" aria-hidden="true"></i>
                                                    </h5>                                                    
                                                    <hr class="hr" />
                                                </div>                                            
                                                <div class="text-3xl font-bold" id="detectionRate">85%</div>
                                                <p class="text-xs text-gray-300">-0.5% from last month</p>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- MODAL -->
                <div class="modal fade" id="analysisModal" tabindex="-1" aria-labelledby="analysisModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" style="max-width: 700px;">
                        <div class="modal-content" style="background-color: #fff;">
                            <div class="modal-header" style="flex-direction: column; align-items: center;">
                                <img src="face_deepfake.jpeg" alt="" height="200px" style="border-radius: 10px;" srcset="">
                                <!-- <video src="deepfake.mp4" height="200px" style="border-radius: 10px;" controls></video> -->
                                <br>
                                <h3 style="color: #151533;" class="modal-title" id="analysisModalLabel">Political Speech Analysis</h3>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; top: 20px; right: 20px;"></button>
                            </div>
                            
                            <div class="modal-body">
                                <section class="row g-3">
                                    <div class="col-lg-12 col-md-12">
                                        <div class="card shadow card-custom" style="background-color: #446C74;">
                                            <div class="card-body">
                                                <div>
                                                    <p class="textclr"><strong>Date:</strong> <span id="modalDate">2023-06-15</span></p>
                                                    <p class="textclr"><strong>Type:</strong> <span id="modalType">Video</span></p>
                                                    <p class="textclr"><strong>Status:</strong> <span id="modalStatus">Deepfake</span></p>
                                                    <p class="textclr"><strong>Confidence:</strong> <span id="modalConfidence">98.5%</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>    
                                <hr />
                                <div class="d-flex justify-content-between align-items-center mb-4">
                                    <h3 style="color: #151533;" class="mb-0">Analysis Details:</h3>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="toggleView" onchange="toggleView()">
                                        <label style="color: #151533;" class="form-check-label" for="toggleView">Show Graph</label>
                                    </div>
                                </div>

                                <section class="row g-3">
                                    <div class="col-lg-12 col-md-12">
                                        <div class="card shadow card-custom" style="background-color: #222252;">
                                            <div class="card-body">
                                                <div id="textReport">
                                                    <p class="textclr"><strong>Abnormal Eye Movement:</strong> <span id="abnormalEye">87%</span></p>
                                                    <p class="textclr"><strong>Lip Sync Issues:</strong> <span id="lipSync">92%</span></p>
                                                    <p class="textclr"><strong>Facial Inconsistencies:</strong> <span id="facialInconsistencies">76%</span></p>
                                                    <p class="textclr"><strong>Audio Artifacts:</strong> <span id="audioArtifacts">89%</span></p>
                                                    <p class="textclr"><strong>Unnatural Blinking:</strong> <span id="unnaturalBlinking">81%</span></p>
                                                    <p class="textclr"><strong>Background Inconsistencies:</strong> <span id="backgroundInconsistencies">65%</span></p>
                                                </div>
                                                <div id="graphView" class="d-none">
                                                    <canvas id="analysisChart" width="600" height="250"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                            <div class="modal-footer">
                                <div class="container">
                                    <div class="row">
                                        <div class="col-lg-6">
                                            <button type="button" class="btn" data-bs-dismiss="modal">Close</button>
                                        </div>
                                        <div class="col-lg-6">
                                            <button class="btn btn-sm" id="downloadButton"><i class="fas fa-download"></i> Download</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <section class="row g-3 mt-1">
                    <div class="col-md-12 col-lg-12">
                        <div class="card shadow card-custom">
                            <div class="card-body">
                                <div class="mb-4">
                                    <h2 class="text-2xl font-bold">Analysis Overview</h2>
                                    <p class="text-gray-300">Detailed breakdown of recent deepfake detection activities</p>
                                </div>
                                <section class="row g-3 mt-1">
                                    <div class="col-md-12 col-lg-12">
                                        <div class="card shadow card-custom">
                                            <div class="card-body">
                                                <div class="container mt-1">
                                                    <div class="overflow-x-auto">
                                                        <div class="table-responsive">
                                                            <table id="myTable" class="table table-hover">
                                                                <thead class="table table-header">
                                                                    <tr>
                                                                        <th scope="col">Name</th>
                                                                        <th scope="col">Date</th>
                                                                        <th scope="col">Type</th>
                                                                        <th scope="col">Status</th>
                                                                        <th scope="col">Confidence</th>
                                                                        <th scope="col">Actions</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody id="reportsTableBody">
                                                                    <tr>
                                                                        <td>Political Speech Analysis</td>
                                                                        <td>2024-11-30</td>
                                                                        <td>Image</td>
                                                                        <td>Detected</td>
                                                                        <td>92%</td>
                                                                        <td>
                                                                            <button class="btn btn-sm me-2" data-bs-toggle="modal" data-bs-target="#analysisModal">
                                                                                <i class="fas fa-eye"></i> View
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Social Media Post Verification</td>
                                                                        <td>2024-11-29</td>
                                                                        <td>Video</td>
                                                                        <td>Detected</td>
                                                                        <td>95%</td>
                                                                        <td>
                                                                            <button class="btn btn-sm me-2">
                                                                                <i class="fas fa-eye"></i> View
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>                                
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        <footer class="footer text-muted-foreground py-4 px-3 mt-auto">
            <div class="container-fluid d-flex justify-content-between">
                <p class="">&copy; 2024 FACE SHIELD</p>
                <nav>
                    <a href="#" class="text-muted text-decoration-none me-3">Privacy</a>
                    <a href="#" class="text-muted text-decoration-none me-3">Terms</a>
                    <a href="#" class="text-muted text-decoration-none">Contact</a>
                </nav>
            </div>
        </footer>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Include the necessary libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>

<script>
    let chartInstance = null;

    function toggleView() {
        var textReport = document.getElementById('textReport');
        var graphView = document.getElementById('graphView');
        var toggle = document.getElementById('toggleView');

        if (toggle.checked) {
            textReport.classList.add('d-none');
            graphView.classList.remove('d-none');
            renderChart();
        } else {
            textReport.classList.remove('d-none');
            graphView.classList.add('d-none');
            if (chartInstance) {
                chartInstance.destroy();
            }
        }
    }

    function renderChart() {
        const ctx = document.getElementById('analysisChart').getContext('2d');

        if (chartInstance) {
            chartInstance.destroy();
        }

        chartInstance = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [
                    'Eye Movement', 
                    'Lip Sync', 
                    'Facial\nInconsistencies', 
                    'Audio\nArtifacts', 
                    'Unnatural\nBlinking', 
                    'Background\nInconsistencies'
                ],
                datasets: [{
                    label: 'Percentage (%)',
                    data: [87, 92, 76, 89, 81, 65],
                    backgroundColor: [
                        'rgba(30, 30, 143, 0.2)',
                        'rgba(50, 162, 168, 0.2)',
                        'rgba(103, 30, 143, 0.2)',
                        'rgba(255,255,255, 0.2)',
                        'rgba(16, 102, 5, 0.2)',
                        'rgba(255, 159, 64, 0.2)'
                    ],
                    borderColor: [
                        'rgba(30, 30, 143, 1)',
                        'rgba(50, 162, 168, 1)',
                        'rgba(103, 30, 143, 1)',
                        'rgba(255,255,255, 1)',
                        'rgba(16, 102, 5, 1)',
                        'rgba(255, 159, 64, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    },
                    x: {
                        font: {
                            size: 18
                        },
                        ticks: {
                            callback: function(value, index) {
                                const labels = [
                                    'Eye', 
                                    'Lip', 
                                    'Facial', 
                                    'Audio', 
                                    'Blinking', 
                                    'Background'
                                ];
                                return labels[index];
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: true,
                        labels: {
                            font: {
                                size: 18
                            }
                        }
                    }
                }
            }
        });
    }

    // Event listener for when the modal is shown
    document.getElementById('analysisModal').addEventListener('shown.bs.modal', function () {
        const toggleButton = document.getElementById('toggleView');
        if (toggleButton.checked) {
            renderChart();
        } else {
            if (chartInstance) {
                chartInstance.destroy();
            }
        }
    });

    // Handle the download button click
    document.getElementById("downloadButton").onclick = function () {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();

        doc.setFontSize(22);
        doc.setFont('helvetica', 'bold');
        doc.setTextColor(68, 108, 116);
        const title = "Political Speech Analysis";
        const pageWidth = doc.internal.pageSize.getWidth();
        const titleWidth = doc.getTextWidth(title);
        const xPosition = (pageWidth - titleWidth) / 2;
        doc.text(title, xPosition, 10);

        doc.setFontSize(12);
        doc.setFont('helvetica');
        doc.setTextColor(34, 34, 82);
        const date = document.getElementById("modalDate").innerText;
        const type = document.getElementById("modalType").innerText;
        const status = document.getElementById("modalStatus").innerText;
        const confidence = document.getElementById("modalConfidence").innerText;

        doc.text(`Video: deepfake.mp4`, 10, 25);
        doc.text(`Date: ${date}`, 10, 30);
        doc.text(`Type: ${type}`, 10, 35);
        doc.text(`Status: ${status}`, 10, 40);
        doc.text(`Confidence: ${confidence}`, 10, 45);

        doc.setFontSize(22);
        doc.setFont('helvetica', 'bold');
        doc.setTextColor(68, 108, 116);
        const title_1 = "Analysis Details";
        const pageWidth_1 = doc.internal.pageSize.getWidth(); 
        const titleWidth_1 = doc.getTextWidth(title_1);
        const xPosition_1 = (pageWidth_1 - titleWidth_1) / 2; 
        doc.text(title_1, xPosition_1, 65);

        // Get and add individual analysis details
        const abnormalEye = document.getElementById("abnormalEye").innerText;
        const lipSync = document.getElementById("lipSync").innerText;
        const facialInconsistencies = document.getElementById("facialInconsistencies").innerText;
        const audioArtifacts = document.getElementById("audioArtifacts").innerText;
        const unnaturalBlinking = document.getElementById("unnaturalBlinking").innerText;
        const backgroundInconsistencies = document.getElementById("backgroundInconsistencies").innerText;

        doc.setFontSize(12);
        doc.setFont('helvetica');
        doc.setTextColor(34, 34, 82);
        doc.text(`Abnormal Eye Movement: ${abnormalEye}`, 10, 80);
        doc.text(`Lip Sync Issues: ${lipSync}`, 10, 85);
        doc.text(`Facial Inconsistencies: ${facialInconsistencies}`, 10, 90);
        doc.text(`Audio Artifacts: ${audioArtifacts}`, 10, 95);
        doc.text(`Unnatural Blinking: ${unnaturalBlinking}`, 10, 100);
        doc.text(`Background Inconsistencies: ${backgroundInconsistencies}`, 10, 105);

        // Make the graph visible if it's hidden
        const graphView = document.getElementById("graphView");
        if (graphView && graphView.classList.contains("d-none")) {
            graphView.classList.remove("d-none");
            toggleButton.checked = true;
            renderChart();
            setTimeout(() => {
                const canvas = document.getElementById("analysisChart");
                const imgData = canvas.toDataURL("image/png");

                doc.addImage(imgData, "PNG", 10, 125, 180, 80);

                doc.save("Analysis_Report.pdf");
            }, 700);
            setTimeout(() => {
                graphView.classList.add("d-none");
                if (chartInstance) {
                    chartInstance.destroy();
                }
            }, 750);
        }
    };

    $(document).ready(function() {
        $('#myTable').DataTable({
            "paging": true, // Enables pagination
            "pageLength": 5, // Number of records per page
            "searching": false, // Disable search
            "ordering": false, // Disable sorting
            "language": {
                "paginate": {
                    "previous": "Previous", // Use text instead of icon
                    "next": "Next" // Use text instead of icon
                }
            },
            "dom": '<"row"<"col-sm-12"p>>t', // Hide the length menu by removing "l" (length) element from DOM
        });
    });

</script>

    <script src="script.js"></script>
</body>
</html>